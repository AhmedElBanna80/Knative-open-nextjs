# Runtime Dockerfile for Go-Builder artifacts
FROM oven/bun:1-alpine

WORKDIR /app

# Copy the entire distribution directory (generated by the Go builder)
# This includes server.ts, node_modules, and assets
COPY . .

# Install runtime dependencies (replaces standalone specifics)
RUN rm -f bun.lockb package-lock.json yarn.lock && bun install --production --no-frozen-lockfile

ENV NODE_ENV=production
ENV PORT=3000
ENV HOSTNAME=0.0.0.0

EXPOSE 3000

CMD ["./server"]

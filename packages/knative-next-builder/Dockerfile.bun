# Final Runtime Stage (Alpine)
# we assume the build context (dist-deploy) contains everything prepared by the builder
FROM alpine:3.20

# Install dependencies needed for HTTPS (ca-certificates) and potentially others
RUN apk add --no-cache ca-certificates libstdc++ gcompat

WORKDIR /app

# Copy everything from the build context (dist-deploy)
COPY . .

ENV NODE_ENV=production
ENV NODE_PATH=/app/node_modules
ENV PORT=3000
ENV HOSTNAME=0.0.0.0

CMD ["./server"]
